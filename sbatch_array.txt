#!/bin/bash

# Example of running R script with a job array

#SBATCH --job-name=test
#SBATCH --partition=test
#SBATCH --array=0-7                   # how many tasks in the array
#SBATCH -c 1                            # one CPU core per task
#SBATCH -t 10:00
#SBATCH -o test-%j-%a.out
#SBATCH --mail-type=ALL
#SBATCH --mail-user=maire.kirkland@bto.org

# Load software
module add jasr

A=$((SLURM_ARRAY_TASK_ID/2+1))
B=$((SLURM_ARRAY_TASK_ID%4+1))

# Run R script with a command line argument
Rscript test.R imputed_dataset${A[$SLURM_ARRAY_TASK_ID]} ${B[$SLURM_ARRAY_TASK_ID]}